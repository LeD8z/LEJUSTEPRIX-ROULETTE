<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>La Taverne de Limoges</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: linear-gradient(180deg, #1a1410 0%, #2d1f0f 50%, #1a1410 100%);
      color: #fbbf24;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      padding: 20px;
    }

    h1 { text-align: center; margin-bottom: 20px; }
    button { cursor: pointer; border: none; border-radius: 12px; padding: 10px 15px; margin: 5px; font-weight: bold; }
    .category { background: linear-gradient(135deg, #78350f 0%, #92400e 100%); color: #fff; font-size: 18px; }
    .category:hover { background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); }
    .product { background: #44403c; color: #fbbf24; padding: 10px; border-radius: 12px; margin: 10px 0; }
    .quantity { background: #57534e; color: #fbbf24; padding: 5px; border-radius: 8px; margin: 5px; }
    .selected { background: #fbbf24; color: #78350f; }
    textarea { width: 100%; border-radius: 8px; padding: 8px; margin-top: 5px; background: #222; color: #fbbf24; border: 1px solid #fbbf24; }
    .btn-order { background: #fbbf24; color: #78350f; width: 100%; padding: 10px; margin-top: 10px; font-size: 18px; }
    video { width: 100%; border-radius: 12px; margin: 10px 0; }
  </style>
</head>
<body>
  <div id="app">
    <h1>üè∫ La Taverne de Limoges</h1>
    <div id="home">
      <div id="categories"></div>
    </div>
    <div id="product-detail" style="display:none;">
      <button id="back-btn">‚¨Ö Retour</button>
      <div id="product-container"></div>
    </div>
  </div>

  <script>
    const TELEGRAM_USERNAME = '@Aladin_870';

    const categories = [
      { id: 'weed', name: 'Weed', emoji: 'üåø' },
      { id: 'mousse', name: 'Jaune Mousseux', emoji: 'üí®' },
      { id: 'frozen', name: 'Frozen', emoji: '‚ùÑÔ∏è' },
      { id: 'filtrer', name: 'Filtrer', emoji: 'üî•' },
      { id: 'static', name: 'Static Premium', emoji: '‚ö°' }
    ];

    const quantityOptions = {
      weed: [{ amount: 1.4, price: 10, label: '1.4g' }, { amount: 2.8, price: 20, label: '2.8g' }],
      mousse: [{ amount: 2.3, price: 10, label: '2.3g' }, { amount: 4.6, price: 20, label: '4.6g' }],
      frozen: [{ amount: 0.5, price: 30, label: '0.5g' }, { amount: 1, price: 50, label: '1g' }],
      filtrer: [{ amount: 1, price: 25, label: '1g' }, { amount: 3, price: 70, label: '3g' }],
      static: [{ amount: 1.2, price: 10, label: '1.2g' }, { amount: 2.4, price: 20, label: '2.4g' }]
    };

    const products = {
      frozen: [{ name: 'Frozen Premium', description: 'Whiteüíé - Puret√© l√©gendaire', video: 'https://www.w3schools.com/html/mov_bbb.mp4' }],
      mousse: [{ name: 'Jaune Mousseux', description: 'Jaune Mousseux - Texture mystique', video: 'https://www.w3schools.com/html/mov_bbb.mp4' }],
      weed: [{ name: 'Weed Premium', description: 'Weed Premium - Tr√©sor ancestral', video: 'https://www.w3schools.com/html/mov_bbb.mp4' }],
      filtrer: [{ name: 'Filtrer Premium', description: 'Filtrer - Qualit√© supr√™me', video: 'https://www.w3schools.com/html/mov_bbb.mp4' }],
      static: [{ name: 'Static Premium', description: 'Static Premium - Qualit√© supr√™me', video: 'https://www.w3schools.com/html/mov_bbb.mp4' }]
    };

    let selectedCategory = null;
    let selectedProduct = null;
    let selectedQuantity = null;
    let bulkQuantity = 100;
    let isBulkMode = false;

    const categoriesDiv = document.getElementById('categories');
    const homeDiv = document.getElementById('home');
    const productDetailDiv = document.getElementById('product-detail');
    const productContainer = document.getElementById('product-container');

    function showCategories() {
      categoriesDiv.innerHTML = '';
      categories.forEach(cat => {
        const btn = document.createElement('button');
        btn.className = 'category';
        btn.innerText = `${cat.emoji} ${cat.name}`;
        btn.onclick = () => selectCategory(cat.id);
        categoriesDiv.appendChild(btn);
      });
    }

    function selectCategory(catId) {
      selectedCategory = catId;
      selectedProduct = products[catId][0];
      showProductDetail();
    }

    function showProductDetail() {
      homeDiv.style.display = 'none';
      productDetailDiv.style.display = 'block';
      renderProduct();
    }

    function renderProduct() {
      productContainer.innerHTML = '';

      const prodDiv = document.createElement('div');
      prodDiv.className = 'product';

      const title = document.createElement('h2');
      title.innerText = selectedProduct.name;
      prodDiv.appendChild(title);

      const video = document.createElement('video');
      video.controls = true;
      const source = document.createElement('source');
      source.src = selectedProduct.video;
      source.type = 'video/mp4';
      video.appendChild(source);
      prodDiv.appendChild(video);

      const desc = document.createElement('p');
      desc.innerText = selectedProduct.description;
      prodDiv.appendChild(desc);

      // Quantit√©
      const qtyDiv = document.createElement('div');
      qtyDiv.innerHTML = '<strong>Choisissez une quantit√© :</strong>';
      quantityOptions[selectedCategory].forEach(q => {
        const qBtn = document.createElement('button');
        qBtn.className = 'quantity';
        qBtn.innerText = `${q.label} - ${q.price}‚Ç¨`;
        qBtn.onclick = () => { selectedQuantity = q; highlightSelected(qBtn); };
        qtyDiv.appendChild(qBtn);
      });
      prodDiv.appendChild(qtyDiv);

      // Adresse
      const addrDiv = document.createElement('div');
      addrDiv.innerHTML = '<label>Adresse de livraison :</label>';
      const textarea = document.createElement('textarea');
      textarea.id = 'delivery';
      addrDiv.appendChild(textarea);
      prodDiv.appendChild(addrDiv);

      // Bouton Commander
      const orderBtn = document.createElement('button');
      orderBtn.className = 'btn-order';
      orderBtn.innerText = 'Commander';
      orderBtn.onclick = handleOrder;
      prodDiv.appendChild(orderBtn);

      productContainer.appendChild(prodDiv);
    }

    function highlightSelected(button) {
      const buttons = document.querySelectorAll('.quantity');
      buttons.forEach(b => b.classList.remove('selected'));
      button.classList.add('selected');
    }

    function handleOrder() {
      const deliveryAddress = document.getElementById('delivery').value || 'Non renseign√©e';
      if (!selectedQuantity) { alert('Veuillez s√©lectionner une quantit√©'); return; }

      const message = `üè∫ NOUVELLE COMMANDE\nProduit: ${selectedProduct.name}\nQuantit√©: ${selectedQuantity.label}\nPrix: ${selectedQuantity.price}‚Ç¨\nAdresse: ${deliveryAddress}`;
      const encodedMessage = encodeURIComponent(message);
      const telegramUrl = `https://t.me/${TELEGRAM_USERNAME}?text=${encodedMessage}`;
      window.open(telegramUrl, '_blank');
    }

    document.getElementById('back-btn').onclick = () => {
      productDetailDiv.style.display = 'none';
      homeDiv.style.display = 'block';
      selectedQuantity = null;
    }

    showCategories();
  </script>
</body>
</html>
