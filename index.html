<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>La Taverne de Limoges</title>
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React + ReactDOM CDN -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <!-- Lucide Icons CDN -->
  <script src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/lucide.js"></script>
</head>
<body class="bg-gray-900 text-white font-sans">
  <div id="root"></div>

  <script>
    const { useState } = React;
    const { ShoppingCart, ChevronLeft, Sparkles, Coins, Gem, Crown, Scroll } = lucide;

    function TelegramShopApp() {
      const [currentView, setCurrentView] = useState('home');
      const [selectedCategory, setSelectedCategory] = useState(null);
      const [selectedProduct, setSelectedProduct] = useState(null);
      const [selectedQuantity, setSelectedQuantity] = useState(null);
      const [bulkQuantity, setBulkQuantity] = useState(100);
      const [isBulkMode, setIsBulkMode] = useState(false);
      const [showBulkSection, setShowBulkSection] = useState(false);
      const [deliveryAddress, setDeliveryAddress] = useState('');
      const [isPriorityDelivery, setIsPriorityDelivery] = useState(false);

      const TELEGRAM_USERNAME = '@Aladin_870';
      const TELEGRAM_CHANNEL = 'https://t.me/+zXPeOM38QjszYzdk';

      const categories = [
        { id:'weed', name:'Weed', emoji:'üåø' },
        { id:'mousse', name:'Jaune Mousseux', emoji:'üí®' },
        { id:'frozen', name:'Frozen', emoji:'‚ùÑÔ∏è' },
        { id:'filtrer', name:'Filtrer', emoji:'üî•' },
        { id:'static', name:'Static Premium', emoji:'‚ö°' }
      ];

      const products = {
        weed:[{id:1,name:'Weed Premium',description:'Weed Premium - Tr√©sor ancestral',video:'https://www.w3schools.com/html/mov_bbb.mp4',badge:'üëë Quality++'}],
        mousse:[{id:2,name:'Jaune Mousseux',description:'Jaune Mousseux - Texture mystique',video:'https://www.w3schools.com/html/mov_bbb.mp4',badge:'‚≠ê D√©fonce+'}],
        frozen:[{id:3,name:'Frozen Premium',description:'Whiteüíé - Puret√© l√©gendaire',video:'https://www.w3schools.com/html/mov_bbb.mp4',badge:'üíé Rare'}],
        filtrer:[{id:4,name:'Filtrer Premium',description:'Filtrer - Qualit√© supr√™me',video:'https://www.w3schools.com/html/mov_bbb.mp4',badge:'üî• D√©fonce++'}],
        static:[{id:5,name:'Static Premium',description:'Static Premium - Qualit√© supr√™me',video:'https://www.w3schools.com/html/mov_bbb.mp4',badge:'‚ö° Premium'}]
      };

      function handleCategoryClick(categoryId) {
        setSelectedCategory(categoryId);
        const catProducts = products[categoryId] || [];
        if(catProducts.length>0){
          setSelectedProduct(catProducts[0]);
          setSelectedQuantity(null);
          setCurrentView('product-detail');
        }
      }

      function handleOrder() {
        if(!selectedQuantity && !isBulkMode) return;
        const finalQuantity = isBulkMode ? bulkQuantity : selectedQuantity.amount || 1;
        const finalPrice = isBulkMode ? finalQuantity * 4 : selectedQuantity.price || 10;
        const finalLabel = isBulkMode ? `${bulkQuantity}g` : (selectedQuantity.label || "1g");
        const totalPrice = isPriorityDelivery ? finalPrice + 5 : finalPrice;
        const message = `üè∫ *NOUVELLE COMMANDE*\nProduit: ${selectedProduct.name}\nQuantit√©: ${finalLabel}\nPrix: ${finalPrice}‚Ç¨\n${isPriorityDelivery?'‚ö° Livraison Prioritaire: +5‚Ç¨\n':''}Total: ${totalPrice}‚Ç¨\nAdresse: ${deliveryAddress||'Non renseign√©e'}`;
        const telegramUrl = `https://t.me/${TELEGRAM_USERNAME}?text=${encodeURIComponent(message)}`;
        navigator.clipboard.writeText(message).then(()=>window.open(telegramUrl,'_blank'));
      }

      function renderHome() {
        return React.createElement("div", {className:"min-h-screen p-6"}, 
          React.createElement("h1",{className:"text-3xl font-bold text-center mb-6"},"La Taverne de Limoges"),
          React.createElement("div",{className:"grid grid-cols-3 gap-4"}, 
            categories.map(cat =>
              React.createElement("button",{key:cat.id,onClick:()=>handleCategoryClick(cat.id),className:"p-4 bg-gray-800 rounded-lg hover:bg-gray-700 transition"}, 
                cat.emoji + " " + cat.name
              )
            )
          )
        );
      }

      function renderProductDetail() {
        return React.createElement("div",{className:"min-h-screen p-5"},
          React.createElement("button",{onClick:()=>setCurrentView('home'),className:"mb-4 px-4 py-2 bg-gray-700 rounded hover:bg-gray-600"}, "‚Üê Retour"),
          React.createElement("h2",{className:"text-xl font-bold mb-3"}, selectedProduct.name),
          React.createElement("p",{className:"mb-2"}, selectedProduct.description),
          React.createElement("video",{controls:true,src:selectedProduct.video,className:"w-full rounded mb-3"}),
          React.createElement("button",{onClick:handleOrder,className:"px-4 py-2 bg-yellow-500 text-gray-900 rounded hover:bg-yellow-400"}, "Commander")
        );
      }

      return currentView==='home'? renderHome() : renderProductDetail();
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(React.createElement(TelegramShopApp));
  </script>
</body>
</html>
