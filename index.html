<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>La Taverne de Limoges</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React & ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <!-- Lucide Icons -->
  <script src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/lucide.js"></script>
</head>
<body class="bg-gray-900 text-white font-sans">
  <div id="root"></div>

  <script>
    // Attendre que Lucide soit charg√© correctement
    function waitForLucide(callback) {
      if (window.lucide) {
        callback(window.lucide);
      } else {
        setTimeout(() => waitForLucide(callback), 50);
      }
    }

    waitForLucide((lucide) => {
      const { useState } = React;
      const { ShoppingCart, ChevronLeft } = lucide;

      function App() {
        const [view, setView] = useState('home');
        const [selectedCategory, setSelectedCategory] = useState(null);
        const [selectedProduct, setSelectedProduct] = useState(null);

        const categories = [
          {id:'weed', name:'Weed', emoji:'üåø'},
          {id:'mousse', name:'Jaune Mousseux', emoji:'üí®'},
          {id:'frozen', name:'Frozen', emoji:'‚ùÑÔ∏è'},
          {id:'filtrer', name:'Filtrer', emoji:'üî•'},
          {id:'static', name:'Static Premium', emoji:'‚ö°'}
        ];

        const products = {
          weed:[{id:1,name:'Weed Premium',desc:'Weed Premium - Tr√©sor ancestral'}],
          mousse:[{id:2,name:'Jaune Mousseux',desc:'Jaune Mousseux - Texture mystique'}],
          frozen:[{id:3,name:'Frozen Premium',desc:'Whiteüíé - Puret√© l√©gendaire'}],
          filtrer:[{id:4,name:'Filtrer Premium',desc:'Filtrer - Qualit√© supr√™me'}],
          static:[{id:5,name:'Static Premium',desc:'Static Premium - Qualit√© supr√™me'}]
        };

        function handleCategoryClick(catId) {
          setSelectedCategory(catId);
          setSelectedProduct(products[catId][0]);
          setView('product');
        }

        function handleBack() {
          setView('home');
          setSelectedCategory(null);
          setSelectedProduct(null);
        }

        function renderHome() {
          return React.createElement("div", {className:"min-h-screen p-6"},
            React.createElement("h1", {className:"text-3xl font-bold text-center mb-6"}, "La Taverne de Limoges"),
            React.createElement("div", {className:"grid grid-cols-3 gap-4"},
              categories.map(cat =>
                React.createElement("button", {
                  key: cat.id,
                  onClick: () => handleCategoryClick(cat.id),
                  className:"p-4 bg-gray-800 rounded-lg hover:bg-gray-700 transition"
                }, cat.emoji + " " + cat.name)
              )
            )
          );
        }

        function renderProduct() {
          if (!selectedProduct) return null;
          return React.createElement("div", {className:"min-h-screen p-5"},
            React.createElement("button", {
              onClick: handleBack,
              className:"mb-4 px-4 py-2 bg-gray-700 rounded hover:bg-gray-600 flex items-center"
            }, React.createElement(ChevronLeft, {className:"w-4 h-4 mr-2"}), "Retour"),
            React.createElement("h2", {className:"text-xl font-bold mb-3"}, selectedProduct.name),
            React.createElement("p", {className:"mb-2"}, selectedProduct.desc),
            React.createElement("button", {
              onClick: ()=>alert('Commande envoy√©e !'),
              className:"px-4 py-2 bg-yellow-500 text-gray-900 rounded hover:bg-yellow-400 flex items-center"
            }, React.createElement(ShoppingCart, {className:"w-5 h-5 mr-2"}), "Commander")
          );
        }

        return view==='home' ? renderHome() : renderProduct();
      }

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(React.createElement(App));
    });
  </script>
</body>
</html>
