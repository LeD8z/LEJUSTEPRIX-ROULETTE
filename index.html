<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Telegram Shop</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/lucide.js"></script>

  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React + ReactDOM CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <!-- Lucide Icons CDN -->
</head>
<body class="bg-gray-900 text-white font-sans">
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;
    // âš ï¸ Utiliser lucideIcons pour le CDN
    const { ShoppingCart, ChevronLeft, Sparkles, Coins, Gem, Crown, Scroll } = lucideIcons;

    const TelegramShopApp = () => {
      const [currentView, setCurrentView] = useState('home');
      const [selectedCategory, setSelectedCategory] = useState(null);
      const [selectedProduct, setSelectedProduct] = useState(null);
      const [selectedQuantity, setSelectedQuantity] = useState(null);
      const [bulkQuantity, setBulkQuantity] = useState(100);
      const [isBulkMode, setIsBulkMode] = useState(false);
      const [showBulkSection, setShowBulkSection] = useState(false);
      const [deliveryAddress, setDeliveryAddress] = useState('');
      const [isPriorityDelivery, setIsPriorityDelivery] = useState(false);

      const TELEGRAM_USERNAME = '@Aladin_870';
      const TELEGRAM_CHANNEL = 'https://t.me/+zXPeOM38QjszYzdk';

      const categories = [
        { id: 'weed', name: 'Weed', emoji: 'ðŸŒ¿' },
        { id: 'mousse', name: 'Jaune Mousseux', emoji: 'ðŸ’¨' },
        { id: 'frozen', name: 'Frozen', emoji: 'â„ï¸' },
        { id: 'filtrer', name: 'Filtrer', emoji: 'ðŸ”¥' },
        { id: 'static', name: 'Static Premium', emoji: 'âš¡' }
      ];

      const products = {
        frozen: [{ id: 1, name: 'Frozen Premium', description: 'WhiteðŸ’Ž - PuretÃ© lÃ©gendaire', video: 'https://www.w3schools.com/html/mov_bbb.mp4', badge: 'ðŸ’Ž Rare' }],
        mousse: [{ id: 4, name: 'Jaune Mousseux', description: 'Jaune Mousseux - Texture mystique', video: 'https://www.w3schools.com/html/mov_bbb.mp4', badge: 'â­ DÃ©fonce+' }],
        weed: [{ id: 5, name: 'Weed Premium', description: 'Weed Premium - TrÃ©sor ancestral', video: 'https://www.w3schools.com/html/mov_bbb.mp4', badge: 'ðŸ‘‘ Quality++' }],
        filtrer: [{ id: 6, name: 'Filtrer Premium', description: 'Filtrer - QualitÃ© suprÃªme', video: 'https://www.w3schools.com/html/mov_bbb.mp4', badge: 'ðŸ”¥ DÃ©fonce++' }],
        static: [{ id: 7, name: 'Static Premium', description: 'Static Premium - QualitÃ© suprÃªme', video: 'https://www.w3schools.com/html/mov_bbb.mp4', badge: 'âš¡ Premium' }]
      };

      const handleCategoryClick = (categoryId) => {
        setSelectedCategory(categoryId);
        const categoryProducts = products[categoryId] || [];
        if (categoryProducts.length > 0) {
          setSelectedProduct(categoryProducts[0]);
          setSelectedQuantity(null);
          setCurrentView('product-detail');
        }
      };

      const renderHome = () => (
        <div className="min-h-screen flex flex-col items-center justify-center">
          <h1 className="text-4xl font-bold mb-8">La Taverne de Limoges</h1>
          <div className="grid grid-cols-3 gap-4">
            {categories.map(cat => (
              <button key={cat.id} onClick={() => handleCategoryClick(cat.id)} className="p-6 rounded-xl bg-amber-700 text-white flex flex-col items-center justify-center hover:scale-105 transition-transform">
                <span className="text-4xl">{cat.emoji}</span>
                <span className="mt-2 font-bold">{cat.name}</span>
              </button>
            ))}
          </div>
        </div>
      );

      const renderProductDetail = () => (
        <div className="min-h-screen p-6">
          <button onClick={() => setCurrentView('home')} className="mb-4 px-4 py-2 bg-gray-800 rounded flex items-center gap-2">
            <ChevronLeft /> Retour
          </button>
          <h2 className="text-2xl font-bold mb-4">{selectedProduct?.name}</h2>
          <video className="w-full mb-4 rounded" controls>
            <source src={selectedProduct?.video} type="video/mp4" />
          </video>
          <p className="mb-4">{selectedProduct?.description}</p>
          <button className="py-3 px-6 rounded bg-yellow-500 text-black flex items-center gap-2" onClick={() => alert('Commande simulÃ©e !')}>
            <ShoppingCart /> Commander
          </button>
        </div>
      );

      return (
        <div>
          {currentView === 'home' && renderHome()}
          {currentView === 'product-detail' && renderProductDetail()}
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<TelegramShopApp />);
  </script>
</body>
</html>
